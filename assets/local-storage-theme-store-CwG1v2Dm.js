import{t as u}from"./try-parse-json-BpEBnayC.js";const m=new Map;function s(t){let n=m.get(t);if(n)return n;function c(e){const r=e.theme?{theme:e.theme,value:e.themes[e.theme]}:void 0;if(!window?.localStorage)return r;try{const a=window.localStorage.getItem(t),o=u(a);return o||r}catch{return r}}function w(e){if(window?.localStorage)try{if(e.theme==null||e.theme===""){window.localStorage.removeItem(t);return}window.localStorage.setItem(t,JSON.stringify({theme:e.theme,value:e.themes[e.theme]}))}catch{}}function d(e){const{handler:r,...a}=e,o=()=>{r(c(a))};if(typeof window>"u"||!window.localStorage)return r(c(a)),{disconnect:()=>{}};o();const i=l=>{l.key===t&&l.storageArea===window.localStorage&&o()};return window.addEventListener("storage",i),{disconnect:()=>{window.removeEventListener("storage",i)}}}return n={get:c,set:w,subscribe:d},m.set(t,n),n}export{s as l};

import{g as h}from"./get-data-attribute-Bl9c_7h4.js";import{o as m}from"./observe-attribute-DJMrXwPX.js";import{f as a}from"./findKey-BZZwGHNT.js";function A(t,r){return m(t,r)}function d(t,r){function o(e){const n=h(t,r)??void 0;return a(e.themes,u=>e.themes[u]===n)??e.defaultTheme??(e.allowCustom?n:void 0)}function c(e){const n=e.theme;if(!n||!(n in e.themes)){r.removeAttribute(t);return}const s=e.themes[n],u=Array.isArray(s)?s[0]:s;u!==void 0&&u!==""?r.setAttribute(t,u):r.removeAttribute(t)}function f(e){const n=A({[t]:s=>{if(s===null){e.handler(e.defaultTheme??null);return}for(const u in e.themes)if(e.themes[u]===s){e.handler(u);return}e.allowCustom&&e.handler(s)}},r);return{disconnect:()=>n.disconnect()}}return{get:o,set:c,subscribe:f}}const i=new Map,l=new WeakMap;function w(t,r){const o=r??(typeof document<"u"?document.documentElement:null);if(!o)return{get:()=>{},set:()=>{},subscribe:()=>({disconnect:()=>{}})};if(r==null){let e=i.get(t);return e||(e=d(t,o),i.set(t,e),e)}let c=l.get(o);c||(c=new Map,l.set(o,c));let f=c.get(t);return f||(f=d(t,o),c.set(t,f),f)}export{w as d,A as o};

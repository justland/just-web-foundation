import{t as u}from"./try-parse-json-BpEBnayC.js";const m=new Map;function f(t){let r=m.get(t);if(r)return r;function i(e){const n=e.theme?{theme:e.theme,value:e.themes[e.theme]}:void 0;if(!window?.sessionStorage)return n;try{const o=window.sessionStorage.getItem(t),s=u(o);return s||n}catch{return n}}function w(e){if(window?.sessionStorage)try{if(e.theme==null||e.theme===""){window.sessionStorage.removeItem(t);return}window.sessionStorage.setItem(t,JSON.stringify({theme:e.theme,value:e.themes[e.theme]}))}catch{}}function d(e){const{handler:n,...o}=e,s=()=>{n(i(o))};if(typeof window>"u"||!window.sessionStorage)return n(i(o)),{disconnect:()=>{}};s();const a=c=>{c.key===t&&c.storageArea===window.sessionStorage&&s()};return window.addEventListener("storage",a),{disconnect:()=>{window.removeEventListener("storage",a)}}}return r={get:i,set:w,subscribe:d},m.set(t,r),r}export{f as s};
